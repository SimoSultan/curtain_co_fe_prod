import React from "react"
// STYLES
import { Grid, Typography, IconButton, Paper } from "@material-ui/core"
import useStyles from "./CartStyles"
// ICONS
import CloseIcon from "@material-ui/icons/Close"
import AddIcon from "@material-ui/icons/Add"
import RemoveIcon from "@material-ui/icons/Remove"
// SERVICES AND HELPERS
import { capitalize } from "../../helpers/appHelpers"

function CartItem({
    itemInCart,
    handleRemove,
    handleIncreaseQty,
    handleDecreaseQty,
}) {
    const classes = useStyles()
    let productItem = itemInCart.item
    let price = productItem.price * itemInCart.qty
    price = price.toFixed(2)

    return (
        <Grid item xs container justify="center">
            <Paper className={classes.paper}>
                <Grid
                    item
                    xs
                    container
                    justify="space-between"
                    alignItems="center"
                    key={`cart-item-${itemInCart.id}`}
                >
                    <Grid item xs={2} container justify="center">
                        <img
                            src={productItem.imgUrl}
                            alt={productItem.name}
                            className={classes.cartItemImg}
                        />
                    </Grid>
                    <Grid
                        item
                        container
                        direction="column"
                        justify="center"
                        alignItems="flex-start"
                        xs={5}
                        className={classes.cartItemDetailsCont}
                    >
                        <Grid item>
                            <Typography variant="h5" component="h5">
                                {capitalize(productItem.name)}
                            </Typography>
                        </Grid>
                        {productItem.colour ? (
                            <>
                                <Grid item>
                                    <Typography>
                                        Colour: {capitalize(productItem.colour)}
                                    </Typography>
                                </Grid>
                                <Grid item>
                                    <Typography>
                                        Category: {productItem.category}
                                    </Typography>
                                </Grid>
                            </>
                        ) : (
                            <>
                                <Grid item>
                                    <Typography>
                                        Collection Contains:
                                    </Typography>
                                </Grid>
                                <Grid item>
                                    <Typography>{`${productItem.track.length}x Track`}</Typography>
                                </Grid>
                                <Grid item>
                                    <Typography>{`${productItem.fabric.length}x Fabric`}</Typography>
                                </Grid>
                                <Grid item>
                                    <Typography>{`${productItem.accessory.length}x Accessory`}</Typography>
                                </Grid>
                            </>
                        )}
                    </Grid>

                    <Grid
                        item
                        xs={3}
                        container
                        justify="center"
                        alignItems="center"
                    >
                        <Grid item xs={4} container justify="center">
                            <IconButton
                                size="small"
                                className={classes.secondaryIconButton}
                                onClick={handleDecreaseQty}
                                value={itemInCart.id}
                            >
                                <RemoveIcon color="secondary" />
                            </IconButton>
                        </Grid>
                        <Grid item xs={4} container justify="center">
                            <Typography>QTY: {itemInCart.qty}</Typography>
                        </Grid>
                        <Grid item xs={4} container justify="center">
                            <IconButton
                                size="small"
                                className={classes.primaryIconButton}
                                onClick={handleIncreaseQty}
                                value={itemInCart.id}
                            >
                                <AddIcon color="primary" />
                            </IconButton>
                        </Grid>
                    </Grid>

                    <Grid item xs={1} container justify="center">
                        <Typography className={classes.cartItemPrice}>
                            ${price}
                        </Typography>
                    </Grid>

                    <Grid item xs={1} container justify="center">
                        <IconButton
                            variant="outlined"
                            color="secondary"
                            value={itemInCart.id}
                            onClick={handleRemove}
                            className={classes.secondaryIconButton}
                        >
                            <CloseIcon color="error" />
                        </IconButton>
                    </Grid>
                </Grid>
            </Paper>
        </Grid>
    )
}

export default CartItem
